diff -Nuar linux-4.14.47.org/drivers/usb/gadget/udc/atmel_usba_udc.c linux-4.14.47/drivers/usb/gadget/udc/atmel_usba_udc.c
--- linux-4.14.47.org/drivers/usb/gadget/udc/atmel_usba_udc.c	2018-05-30 22:32:31.000000000 +0200
+++ linux-4.14.47/drivers/usb/gadget/udc/atmel_usba_udc.c	2018-10-31 00:03:30.351531692 +0100
@@ -2176,7 +2176,7 @@
 		ep->ep.caps.dir_in = true;
 		ep->ep.caps.dir_out = true;
 
-		if (fifo_mode != 0) {
+		// if (fifo_mode != 0) {
 			/*
 			 * Generate ept_cfg based on FIFO size and
 			 * banks number
@@ -2189,7 +2189,7 @@
 				  USBA_BF(EPT_SIZE, fls(ep->fifo_size - 1) - 3);
 
 			ep->ept_cfg |= USBA_BF(BK_NUMBER, ep->nr_banks);
-		}
+		// }
 
 		if (i)
 			list_add_tail(&ep->ep.ep_list, &udc->gadget.ep_list);
